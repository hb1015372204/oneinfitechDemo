webpackJsonp([1],{"F+Kl":function(i,o){},cGR3:function(i,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e={name:"map",data:function(){return{map:null,thisPosition:{location:"",lng:"",lat:""},chosePosition:{location:"",lng:"",lat:""},myCircle:{},circle:{},circleEditor:null,positionPickerObj:{},citycode:"020"}},methods:{addTool:function(){var i=this;AMap.plugin(["AMap.ToolBar","AMap.Driving"],function(){var o=new AMap.ToolBar;i.map.addControl(o)})},thisLocation:function(){var i=this;this.map.plugin("AMap.Geolocation",function(){var o=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!1,buttonPosition:"RB"});i.map.addControl(o),o.getCurrentPosition(),AMap.event.addListener(o,"complete",function(o){console.log(o),i.citycode=o.addressComponent.cityCode,i.thisPosition=o.position,i.thisPosition.message=o.formattedAddress,i.chosePosition=i.thisPosition,i.cancelLocation(),i.addCircle(),i.positionPicker()}),AMap.event.addListener(o,"error",function(i){alert("定位失败")})})},addCircle:function(){var i=this;this.myCircle={center:[this.chosePosition.lng,this.chosePosition.lat],radius:300,strokeColor:"#FFFF00",strokeOpacity:.2,strokeWeight:1,fillColor:"#222222",fillOpacity:.2},this.circle=new AMap.Circle(this.myCircle),this.circle.setMap(this.map),this.map.plugin(["AMap.CircleEditor"],function(){i.circleEditor=new AMap.CircleEditor(i.map,i.circle),i.circleEditor.open(),i.myCircle.radius=i.circle.Mg.radius,i.circleEditor.on("adjust",function(o){i.myCircle.radius=o.radius}),i.circleEditor.on("move",function(o){console.log("移动"),i.chosePosition.lng=o.lnglat.lng,i.chosePosition.lat=o.lnglat.lat})})},cancelLocation:function(){this.map.remove(this.circle),this.circleEditor&&this.circleEditor.close()},search:function(){var i=this,o=this;AMap.plugin(["AMap.PlaceSearch","AMap.Autocomplete"],function(){var t={city:i.citycode,input:"input_id"},e=new AMap.Autocomplete(t),n=new AMap.PlaceSearch({city:i.citycode,map:o.map});AMap.event.addListener(e,"select",function(o){n.setCity(o.poi.adcode),i.chosePosition=o.poi.location,i.chosePosition&&(i.cancelLocation(),i.addCircle(),i.positionPickerObj.stop(),i.positionPicker(),i.createWindow())})})},getMaker:function(){var i=this.map.getAllOverlays("circle");console.log(i)},positionPicker:function(){var i=this;AMapUI.loadUI(["misc/PositionPicker"],function(o){i.positionPickerObj=new o({mode:"dragMarker",map:i.map}),i.positionPickerObj.on("success",function(o){i.chosePosition=o.position,i.cancelLocation(),i.addCircle()}),i.positionPickerObj.start([i.chosePosition.lng,i.chosePosition.lat])})},createWindow:function(){new AMap.InfoWindow({content:['<div style="width: 100%;>','<div class="fs-16">范围: 200米</div>','<div class="fs-14">位置不准确？试试拖拽鼠标或者输入地点</div></div>'].join("<br>"),offset:new AMap.Pixel(0,-50)}).open(this.map,this.chosePosition)}},activated:function(){},mounted:function(){this.map=new AMap.Map("container-map",{resizeEnable:!0,zoom:15,viewMode:"2D",zooms:[4,18]}),this.addTool(),this.thisLocation(),this.search()}},n={render:function(){var i=this,o=i.$createElement,t=i._self._c||o;return t("div",[t("div",{staticStyle:{width:"500px",height:"500px"},attrs:{id:"container-map"}}),i._v(" "),t("button",{on:{click:i.addTool}},[i._v("加载")]),i._v(" "),t("button",{on:{click:i.addCircle}},[i._v("画圆")]),i._v(" "),t("button",{on:{click:i.thisLocation}},[i._v("定位")]),i._v(" "),t("button",{on:{click:i.cancelLocation}},[i._v("取消圆")]),i._v(" "),t("button",{on:{click:i.getMaker}},[i._v("获取覆盖物信息")]),i._v(" "),t("input",{attrs:{type:"text",id:"input_id"}}),i._v(" "),t("span",[i._v(i._s(i.chosePosition))]),i._v(" "),t("span",[i._v("圆的长度"+i._s(i.myCircle.radius))])])},staticRenderFns:[]};var c=t("VU/8")(e,n,!1,function(i){t("F+Kl")},"data-v-c86cf3be",null);o.default=c.exports}});
//# sourceMappingURL=1.819ac07dbc0b01a0223f.js.map