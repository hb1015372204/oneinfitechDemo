{"version":3,"sources":["webpack:///src/view/oneMap/demo.vue","webpack:///./src/view/oneMap/demo.vue?32c0","webpack:///./src/view/oneMap/demo.vue"],"names":["demo","name","data","map","thisPosition","location","lng","lat","chosePosition","myCircle","circle","circleEditor","positionPickerObj","citycode","methods","addTool","_this","this","AMap","plugin","toolbar","ToolBar","addControl","thisLocation","_this2","geolocation","Geolocation","enableHighAccuracy","timeout","buttonOffset","Pixel","zoomToAccuracy","buttonPosition","getCurrentPosition","event","addListener","console","log","addressComponent","cityCode","position","message","formattedAddress","cancelLocation","addCircle","positionPicker","alert","_this3","center","radius","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","Circle","setMap","CircleEditor","open","Mg","on","lnglat","remove","close","search","_this4","vm","autoOptions","city","input","autoComplete","Autocomplete","placeSearch","PlaceSearch","e","setCity","poi","adcode","stop","createWindow","getMaker","overlaysList","getAllOverlays","_this5","AMapUI","loadUI","PositionPicker","mode","positionResult","start","InfoWindow","content","join","offset","activated","mounted","Map","resizeEnable","zoom","viewMode","zooms","oneMap_demo","render","_vm","_h","$createElement","_c","_self","staticStyle","width","height","attrs","id","_v","click","type","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.819ac07dbc0b01a0223f.js","sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"container-map\" style=\"width:500px; height:500px\"></div>\r\n    <button @click=\"addTool\">加载</button>\r\n    <button @click=\"addCircle\">画圆</button>\r\n    <button @click=\"thisLocation\">定位</button>\r\n    <button @click=\"cancelLocation\">取消圆</button>\r\n    <button @click=\"getMaker\">获取覆盖物信息</button>\r\n    <input type=\"text\" id=\"input_id\">\r\n    <span>{{chosePosition}}</span>\r\n    <span>圆的长度{{myCircle.radius}}</span>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\n \r\n//  参考  https://blog.csdn.net/qq_24065713/article/details/81456963\r\n\r\n\r\n\r\n// import AMap from 'AMap'\r\n// import AMapUI from 'AMapUI'\r\nexport default {\r\n  name: 'map',\r\n  data () {\r\n    return {\r\n      map: null,\r\n      /* 当前位置 */\r\n      thisPosition: {\r\n        location: '',\r\n        lng: '',\r\n        lat: ''\r\n      },\r\n      /* 选取的位置 */\r\n      chosePosition: {\r\n        location: '',\r\n        lng: '',\r\n        lat: ''\r\n      },\r\n      /* 范围圆的数据 */\r\n      myCircle: {},\r\n      /* 签到圆对象 */\r\n      circle: {},\r\n      /* 编辑器对象 */\r\n      circleEditor: null,\r\n      /* 拖拽对象 */\r\n      positionPickerObj: {},\r\n      /* 当前城市编码 */\r\n      citycode: '020'\r\n    }\r\n  },\r\n  methods: {\r\n    /* 添加工具条 */\r\n    addTool () {\r\n      AMap.plugin(['AMap.ToolBar', 'AMap.Driving'], () => {\r\n        let toolbar = new AMap.ToolBar()\r\n        this.map.addControl(toolbar)\r\n      })\r\n    },\r\n    /* 定位具体位置 */\r\n    thisLocation () {\r\n      this.map.plugin('AMap.Geolocation', () => {\r\n        let geolocation = new AMap.Geolocation({\r\n          // 是否使用高精度定位，默认：true\r\n          enableHighAccuracy: true,\r\n          // 设置定位超时时间，默认：无穷大\r\n          timeout: 10000,\r\n          // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\r\n          buttonOffset: new AMap.Pixel(10, 20),\r\n          //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\r\n          zoomToAccuracy: false,\r\n          //  定位按钮的排放位置,  RB表示右下\r\n          buttonPosition: 'RB'\r\n        })\r\n        this.map.addControl(geolocation)\r\n        geolocation.getCurrentPosition()\r\n        AMap.event.addListener(geolocation, 'complete', (data) => {\r\n          console.log(data)\r\n          this.citycode = data.addressComponent.cityCode\r\n          this.thisPosition = data.position\r\n          this.thisPosition.message = data.formattedAddress\r\n          this.chosePosition = this.thisPosition\r\n          /* 画圆 */\r\n          this.cancelLocation()\r\n          this.addCircle()\r\n          /* 拖拽选址 */\r\n          this.positionPicker()\r\n        })\r\n        AMap.event.addListener(geolocation, 'error', function (data) {\r\n          alert('定位失败')\r\n        })\r\n      })\r\n    },\r\n    /* 画图 */\r\n    addCircle () {\r\n      this.myCircle = {\r\n        center: [this.chosePosition.lng, this.chosePosition.lat], // 圆心位置\r\n        radius: 300, // 半径\r\n        strokeColor: '#FFFF00', // 线颜色\r\n        strokeOpacity: 0.2, // 线透明度\r\n        strokeWeight: 1, // 线粗细度\r\n        fillColor: '#222222', // 填充颜色\r\n        fillOpacity: 0.2// 填充透明度\r\n      }\r\n      this.circle = new AMap.Circle(this.myCircle)\r\n      this.circle.setMap(this.map)\r\n      // 引入多边形编辑器插件\r\n      this.map.plugin(['AMap.CircleEditor'], () => {\r\n        // 实例化多边形编辑器，传入地图实例和要进行编辑的多边形实例\r\n        this.circleEditor = new AMap.CircleEditor(this.map, this.circle)\r\n        // 开启编辑模式\r\n        this.circleEditor.open()\r\n        this.myCircle.radius = this.circle.Mg.radius\r\n        this.circleEditor.on('adjust', (data) => {\r\n          this.myCircle.radius = data.radius\r\n        })\r\n        this.circleEditor.on('move', (data) => {\r\n          console.log('移动')\r\n          this.chosePosition.lng = data.lnglat.lng\r\n          this.chosePosition.lat = data.lnglat.lat\r\n        })\r\n      })\r\n    },\r\n    /* 取消圆 */\r\n    cancelLocation () {\r\n      this.map.remove(this.circle)\r\n      if (this.circleEditor) {\r\n        this.circleEditor.close()\r\n      }\r\n    },\r\n    /* 搜索 */\r\n    search () {\r\n      let vm = this\r\n      AMap.plugin(['AMap.PlaceSearch', 'AMap.Autocomplete'], () => {\r\n        var autoOptions = {\r\n          city: this.citycode,\r\n          input: 'input_id'\r\n        }\r\n        // eslint-disable-next-line no-unused-vars\r\n        let autoComplete = new AMap.Autocomplete(autoOptions)\r\n        // eslint-disable-next-line no-unused-vars\r\n        let placeSearch = new AMap.PlaceSearch({\r\n          city: this.citycode,\r\n          map: vm.map\r\n        })\r\n        AMap.event.addListener(autoComplete, 'select', e => {\r\n          // TODO 针对选中的poi实现自己的功能\r\n          placeSearch.setCity(e.poi.adcode)\r\n          // placeSearch.search(e.poi.name)\r\n          this.chosePosition = e.poi.location\r\n          if (this.chosePosition) {\r\n            /* 画圆 */\r\n            this.cancelLocation()\r\n            this.addCircle()\r\n            /* 拖拽选址 */\r\n            this.positionPickerObj.stop()\r\n            this.positionPicker()\r\n            this.createWindow()\r\n          }\r\n        })\r\n      })\r\n    },\r\n    /* 获取覆盖物信息 */\r\n    getMaker () {\r\n      var overlaysList = this.map.getAllOverlays('circle')\r\n      console.log(overlaysList)\r\n      // 可选参数有:‘marker’、‘circle’、‘polyline’、‘polygon\r\n    },\r\n    /* 拖拽选址 */\r\n    positionPicker () {\r\n      AMapUI.loadUI(['misc/PositionPicker'], (PositionPicker) => {\r\n        this.positionPickerObj = new PositionPicker({\r\n          mode: 'dragMarker', // 设定为拖拽地图模式，可选'dragMap'、'dragMarker'，默认为'dragMap'\r\n          map: this.map // 依赖地图对象\r\n        })\r\n        this.positionPickerObj.on('success', (positionResult) => {\r\n          this.chosePosition = positionResult.position\r\n          /* 画圆 */\r\n          this.cancelLocation()\r\n          this.addCircle()\r\n        })\r\n        this.positionPickerObj.start([this.chosePosition.lng, this.chosePosition.lat])\r\n      })\r\n    },\r\n    /* 创建信息窗体 */\r\n    createWindow () {\r\n      // 信息窗体的内容\r\n      var content = [\r\n        '<div style=\"width: 100%;>',\r\n        '<div class=\"fs-16\">范围: 200米</div>',\r\n        '<div class=\"fs-14\">位置不准确？试试拖拽鼠标或者输入地点</div></div>'\r\n      ]\r\n      // 创建 infoWindow 实例\r\n      var infoWindow = new AMap.InfoWindow({\r\n        content: content.join('<br>'),  // 传入 dom 对象，或者 html 字符串\r\n        offset: new AMap.Pixel(0, -50)\r\n      })\r\n      // 打开信息窗体\r\n      infoWindow.open(this.map, this.chosePosition)\r\n    }\r\n  },\r\n  activated () {\r\n  },\r\n  mounted () {\r\n    this.map = new AMap.Map('container-map', {\r\n      resizeEnable: true,\r\n      zoom: 15,\r\n      viewMode: '2D',\r\n      zooms: [4, 18]\r\n    })\r\n    /* 添加工具条 */\r\n    this.addTool()\r\n    /* 获取当前位置 */\r\n    this.thisLocation()\r\n    /* 添加搜索功能 */\r\n    this.search()\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .amap-wrapper {\r\n    width: 500px;\r\n    height: 500px;\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/view/oneMap/demo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"width\":\"500px\",\"height\":\"500px\"},attrs:{\"id\":\"container-map\"}}),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.addTool}},[_vm._v(\"加载\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.addCircle}},[_vm._v(\"画圆\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.thisLocation}},[_vm._v(\"定位\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.cancelLocation}},[_vm._v(\"取消圆\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.getMaker}},[_vm._v(\"获取覆盖物信息\")]),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"text\",\"id\":\"input_id\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.chosePosition))]),_vm._v(\" \"),_c('span',[_vm._v(\"圆的长度\"+_vm._s(_vm.myCircle.radius))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c86cf3be\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/oneMap/demo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c86cf3be\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./demo.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c86cf3be\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c86cf3be\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/oneMap/demo.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}